jobs:
  CloneRepo:
    resources:
      instance-type: C5
    outputs:
      repo:
        type: volume
    uses: git-checkout@v1
    with:
      url: https://github.com/melnyczuk/gaaaaaaaans.git
      ref: 3fcc2622b54873fe6e6b5afbb66ae02ec3210ec8
  Cloudput:
    resources:
      instance-type: P4000
    needs:
      - CloneRepo
    inputs:
      repo: CloneRepo.outputs.repo
      abstract-art:
        type: dataset
        with:
          ref: dsi5tyqayopp7em:ame25xz
    outputs:
      absts:
        type: dataset
        with:
          ref: dsagnu1m6sevqe8
    uses: script@v1
    with:
      script: |-
        cd /inputs/repo
        pip install pipenv
        pipenv sync
        pipenv run cloudput
      image: python:3.10.6
